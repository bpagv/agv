<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora AGV - Bellinati Perez</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, rgb(30, 38, 49) 0%, rgb(185, 39, 75) 100%);
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .service-card {
            transition: all 0.3s ease;
            transform: translateY(0);
        }
        
        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .price-display {
            background: linear-gradient(45deg, rgb(185, 39, 75) 0%, #ffffff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .slider {
            -webkit-appearance: none;
            appearance: none;
            height: 8px;
            border-radius: 5px;
            background: #e2e8f0;
            outline: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(45deg, rgb(185, 39, 75), rgb(30, 38, 49));
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(45deg, rgb(185, 39, 75), rgb(30, 38, 49));
            cursor: pointer;
            border: none;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-fade-in-up {
            animation: fadeInUp 0.6s ease-out;
        }
    </style>
</head>
<body class="gradient-bg min-h-screen font-sans">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="relative text-center mb-12 animate-fade-in-up">
            <!-- Logo no canto superior direito -->
            <div class="absolute top-0 right-0">
                <img src="https://i.imgur.com/rmVFF1A.png" alt="Logo Bellinati Perez" class="h-8 w-auto" onerror="this.style.display='none'; console.log('Logo failed to load');">
            </div>
            
            <h1 class="text-4xl md:text-6xl font-bold text-white mb-4">
                Agentes Virtuais
            </h1>
            <p class="text-xl text-white/80 mb-2">Calculadora de Pre√ßos</p>
            <div class="w-24 h-1 bg-gradient-to-r from-pink-500 to-red-500 mx-auto rounded-full"></div>
        </div>

        <!-- Calculator Container -->
        <div class="max-w-6xl mx-auto glass-effect rounded-3xl p-8 mb-8">
            <div class="grid lg:grid-cols-3 gap-8">
                <!-- Provider Selection -->
                <div class="space-y-6">
                    <h2 class="text-2xl font-bold text-white mb-6">Fornecedor & Servi√ßos</h2>
                    
                    <div class="service-card bg-white/10 rounded-2xl p-6 border border-white/20">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-white/80 text-sm mb-2">Fornecedor:</label>
                                <select id="provider-select" class="w-full bg-white/20 text-white rounded-lg p-3 border border-white/30 focus:border-pink-500 focus:outline-none">
                                    <option value="aspect" class="bg-gray-800">Aspect</option>
                                    <option value="paneas" class="bg-gray-800">Paneas</option>
                                    <option value="pontal" class="bg-gray-800">Pontal</option>
                                    <option value="robbu" class="bg-gray-800">Robbu</option>
                                    <option value="sinergytech" class="bg-gray-800">Sinergytech</option>
                                    <option value="techia" class="bg-gray-800">TechIA</option>
                                    <option value="wiz" class="bg-gray-800">WIZ</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Available Services -->
                    <div class="service-card bg-white/10 rounded-2xl p-6 border border-white/20">
                        <h3 class="text-lg font-semibold text-white mb-4">Servi√ßos Dispon√≠veis</h3>
                        <div id="available-services" class="space-y-3">
                            <!-- Services will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Configuration Section -->
                <div class="space-y-6">
                    <h2 class="text-2xl font-bold text-white mb-6">Configura√ß√µes</h2>
                    
                    <!-- Hor√°rio de Atua√ß√£o -->
                    <div class="service-card bg-white/10 rounded-2xl p-6 border border-white/20">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-white">‚è∞ Hor√°rio de Atua√ß√£o</h3>
                        </div>
                        <div class="space-y-4">
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-white/80 text-sm mb-2">Hora In√≠cio:</label>
                                    <input type="time" id="start-time" class="w-full bg-white/20 text-white rounded-lg p-3 border border-white/30 focus:border-pink-500 focus:outline-none" value="08:00">
                                </div>
                                <div>
                                    <label class="block text-white/80 text-sm mb-2">Hora Fim:</label>
                                    <input type="time" id="end-time" class="w-full bg-white/20 text-white rounded-lg p-3 border border-white/30 focus:border-pink-500 focus:outline-none" value="18:00">
                                </div>
                            </div>
                            <div class="bg-white/10 rounded-lg p-3">
                                <div class="text-sm text-white/80">Total de horas:</div>
                                <div class="text-lg font-bold text-white" id="total-hours-display">10 horas</div>
                            </div>
                        </div>
                    </div>

                    <!-- Volume de Mailing -->
                    <div class="service-card bg-white/10 rounded-2xl p-6 border border-white/20">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-white">üìä Volume de Mailing</h3>
                        </div>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-white/80 text-sm mb-2">Volume:</label>
                                <input type="number" id="volume-input" class="w-full bg-white/20 text-white rounded-lg p-3 border border-white/30 focus:border-pink-500 focus:outline-none" value="30000" min="1000" step="1000">
                            </div>
                        </div>
                    </div>

                    <!-- Spin (para Recado/Preventivo) -->
                    <div id="spin-section" class="service-card bg-white/10 rounded-2xl p-6 border border-white/20 hidden">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-white">üîÑ Spin</h3>
                        </div>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-white/80 text-sm mb-2">Spin: <span id="spin-display">3</span>x</label>
                                <input type="range" id="spin-slider" class="slider w-full" min="1" max="5" value="3">
                            </div>
                        </div>
                    </div>

                    <!-- Hit Rate -->
                    <div class="service-card bg-white/10 rounded-2xl p-6 border border-white/20">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-white">üéØ Hit Rate</h3>
                        </div>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-white/80 text-sm mb-2">Hit Rate (%):</label>
                                <input type="number" id="hitrate-input" class="w-full bg-white/20 text-white rounded-lg p-3 border border-white/30 focus:border-pink-500 focus:outline-none" value="2" min="1" max="100" step="0.1">
                            </div>
                        </div>
                    </div>

                    <!-- C√°lculo de Licen√ßas -->
                    <div class="service-card bg-white/10 rounded-2xl p-6 border border-white/20">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-white">üìä C√°lculo de Licen√ßas</h3>
                        </div>
                        <div class="space-y-3">
                            <div class="bg-white/10 rounded-lg p-3">
                                <div class="text-sm text-white/80">Total de Discagens:</div>
                                <div class="text-lg font-bold text-white" id="total-calls-display">0</div>
                            </div>
                            <div class="bg-white/10 rounded-lg p-3">
                                <div class="text-sm text-white/80">Raz√£o de Discagem:</div>
                                <div class="text-lg font-bold text-white" id="dial-rate-display">0</div>
                            </div>
                            <div class="bg-white/10 rounded-lg p-3">
                                <div class="text-sm text-white/80">Licen√ßas Necess√°rias:</div>
                                <div class="text-lg font-bold text-pink-300" id="licenses-display">0</div>
                            </div>
                        </div>
                    </div>

                    <!-- Custo de Telefonia -->
                    <div class="service-card bg-white/10 rounded-2xl p-6 border border-white/20">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-white">üìû Custo de Telefonia</h3>
                        </div>
                        <div class="space-y-3">
                            <div class="bg-white/10 rounded-lg p-3">
                                <div class="text-sm text-white/80">Custo TTF/Dia:</div>
                                <div class="text-lg font-bold text-white" id="ttf-cost-display">R$ 0,00</div>
                            </div>
                            <div class="bg-white/10 rounded-lg p-3">
                                <div class="text-sm text-white/80">Custo Improdutivo/Dia:</div>
                                <div class="text-lg font-bold text-white" id="improd-cost-display">R$ 0,00</div>
                            </div>
                            <div class="bg-white/10 rounded-lg p-3">
                                <div class="text-sm text-white/80">Custo Total Telefonia:</div>
                                <div class="text-lg font-bold text-pink-300" id="total-phone-cost-display">R$ 0,00</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Summary Section -->
                <div class="space-y-6">
                    <h2 class="text-2xl font-bold text-white mb-6">Resumo do Or√ßamento</h2>
                    
                    <div class="bg-white/10 rounded-2xl p-6 border border-white/20">
                        <div class="space-y-4">
                            <div class="text-center mb-4">
                                <div class="text-sm text-white/80">Fornecedor Selecionado</div>
                                <div class="text-lg font-bold text-white" id="selected-provider">Aspect</div>
                            </div>
                            
                            <div id="selected-services" class="space-y-3">
                                <!-- Selected services will appear here -->
                            </div>
                            
                            <div class="border-t border-white/20 pt-4 space-y-3">
                                <div class="flex justify-between items-center">
                                    <span class="text-lg text-white/80">Custo Licen√ßas:</span>
                                    <span class="text-lg font-semibold text-white" id="license-cost-total">R$ 0,00</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-lg text-white/80">Custo Telefonia:</span>
                                    <span class="text-lg font-semibold text-white" id="phone-cost-total">R$ 0,00</span>
                                </div>
                                <div class="border-t border-white/20 pt-3">
                                    <div class="flex justify-between items-center">
                                        <span class="text-xl font-bold text-white">Total Geral</span>
                                        <span class="text-3xl font-bold price-display" id="grand-total">R$ 0,00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="space-y-4">
                        <button onclick="generateQuote()" class="w-full bg-gradient-to-r from-red-500 to-pink-600 text-white font-semibold py-4 px-6 rounded-2xl hover:from-red-600 hover:to-pink-700 transition-all duration-300 transform hover:scale-105 shadow-lg">
                            üíæ Gerar Proposta
                        </button>
                        <button onclick="resetCalculator()" class="w-full bg-white/20 text-white font-semibold py-3 px-6 rounded-2xl hover:bg-white/30 transition-all duration-300 border border-white/30">
                            üîÑ Limpar Tudo
                        </button>
                    </div>

                    <!-- Quote Display -->
                    <div id="quote-display" class="hidden bg-green-500/20 border border-green-400/30 rounded-2xl p-6">
                        <h3 class="text-lg font-semibold text-green-300 mb-3">üìã Proposta Gerada</h3>
                        <div id="quote-content" class="text-white/90 text-sm space-y-2"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center text-white/60 text-sm space-y-1">
            <p>¬© 2024 Bellinati Perez - Agentes Virtuais - Calculadora de Pre√ßos</p>
            <p class="text-white/40 text-xs">Desenvolvido por √âvelim Esquetini</p>
        </div>
    </div>

    <script>
        // Provider and Service pricing
        const providerPrices = {
            aspect: {
                negociador: 475.00,
                localizador: 475.00
            },
            paneas: {
                negociador: 520.00,
                localizador: 40.00,
                recado: 40.00
            },
            pontal: {
                negociador: 299.00,
                localizador: 60.00,
                'localizador-smartplay': 75.00,
                recado: 40.00,
                preventivo: 40.00
            },
            robbu: {
                negociador: 430.00
            },
            sinergytech: {
                negociador: 320.00,
                localizador: 60.00,
                recado: 40.00,
                preventivo: 320.00
            },
            techia: {
                negociador: 300.00
            },
            wiz: {
                negociador: 0.55
            }
        };

        // Provider dialing capacity and rates
        const providerCapacity = {
            aspect: {
                dialRate: 10,
                capacity: 75
            },
            paneas: {
                dialRate: 10,
                capacity: 282
            },
            pontal: {
                dialRate: 4,
                capacity: 134
            },
            'pontal-smartplay': {
                dialRate: 10,
                capacity: 134
            },
            robbu: {
                dialRate: 5,
                capacity: 183
            },
            sinergytech: {
                dialRate: 5,
                capacity: 164
            },
            techia: {
                dialRate: 16,
                capacity: 70
            },
            wiz: {
                dialRate: 1,
                capacity: 100
            }
        };

        // TMA (Tempo M√©dio de Atendimento) por servi√ßo em segundos
        const serviceTMA = {
            negociador: 60,
            localizador: 30,
            recado: 40,
            preventivo: 40,
            'localizador-smartplay': 30
        };

        // Constantes para c√°lculo de telefonia
        const COST_PER_MINUTE = 0.06; // R$ 0,06 por minuto
        const BUSINESS_DAYS = 24;
        const UNPRODUCTIVE_RATE = 0.01; // 1.0%

        const providerNames = {
            aspect: 'Aspect',
            paneas: 'Paneas',
            pontal: 'Pontal',
            robbu: 'Robbu',
            sinergytech: 'Sinergytech',
            techia: 'TechIA',
            wiz: 'WIZ'
        };

        const serviceNames = {
            negociador: 'Negociador',
            localizador: 'Localizador',
            'localizador-smartplay': 'Localizador SmartPlay',
            recado: 'Recado',
            preventivo: 'Preventivo'
        };

        // Calculator state
        let state = {
            provider: 'aspect',
            selectedServices: {},
            startTime: '08:00',
            endTime: '18:00',
            totalHours: 10,
            volume: 30000,
            spin: 3,
            hitRate: 2
        };

        // Initialize calculator
        function initCalculator() {
            updateAvailableServices();
            updateCalculations();
            setupEventListeners();
        }

        function setupEventListeners() {
            document.getElementById('provider-select').addEventListener('change', function() {
                state.provider = this.value;
                state.selectedServices = {};
                document.getElementById('selected-provider').textContent = providerNames[state.provider];
                updateAvailableServices();
                updateCalculations();
            });

            document.getElementById('start-time').addEventListener('change', function() {
                state.startTime = this.value;
                calculateTotalHours();
                updateCalculations();
            });

            document.getElementById('end-time').addEventListener('change', function() {
                state.endTime = this.value;
                calculateTotalHours();
                updateCalculations();
            });

            document.getElementById('volume-input').addEventListener('input', function() {
                state.volume = parseInt(this.value) || 0;
                updateCalculations();
            });

            document.getElementById('spin-slider').addEventListener('input', function() {
                state.spin = parseInt(this.value);
                document.getElementById('spin-display').textContent = state.spin;
                updateCalculations();
            });

            document.getElementById('hitrate-input').addEventListener('input', function() {
                state.hitRate = parseFloat(this.value) || 0;
                updateCalculations();
            });
        }

        function calculateTotalHours() {
            const start = new Date(`2024-01-01T${state.startTime}:00`);
            const end = new Date(`2024-01-01T${state.endTime}:00`);
            
            let diff = (end - start) / (1000 * 60 * 60); // Convert to hours
            
            // Handle overnight shifts
            if (diff < 0) {
                diff += 24;
            }
            
            // Round down to nearest hour
            diff = Math.floor(diff);
            
            state.totalHours = diff;
            document.getElementById('total-hours-display').textContent = `${diff} horas`;
        }

        function updateAvailableServices() {
            const container = document.getElementById('available-services');
            container.innerHTML = '';
            
            const services = providerPrices[state.provider];
            
            Object.keys(services).forEach(serviceKey => {
                const price = services[serviceKey];
                const serviceName = serviceNames[serviceKey];
                
                const serviceDiv = document.createElement('div');
                serviceDiv.className = 'flex items-center justify-between p-3 bg-white/10 rounded-lg border border-white/20';
                
                serviceDiv.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <input type="checkbox" id="service-${serviceKey}" class="w-4 h-4 text-pink-600 bg-gray-100 border-gray-300 rounded focus:ring-pink-500">
                        <label for="service-${serviceKey}" class="text-white text-sm font-medium">${serviceName}</label>
                    </div>
                    <span class="text-white/80 text-sm">R$ ${price.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</span>
                `;
                
                container.appendChild(serviceDiv);
                
                // Add event listener for checkbox
                document.getElementById(`service-${serviceKey}`).addEventListener('change', function() {
                    if (this.checked) {
                        state.selectedServices[serviceKey] = price;
                    } else {
                        delete state.selectedServices[serviceKey];
                    }
                    updateCalculations();
                    updateVisibleSections();
                });
            });
        }

        function updateVisibleSections() {
            const selectedServiceKeys = Object.keys(state.selectedServices);
            const hasRecadoOrPreventivo = selectedServiceKeys.some(key => key === 'recado' || key === 'preventivo');
            
            // Show/hide spin section
            const spinSection = document.getElementById('spin-section');
            if (hasRecadoOrPreventivo) {
                spinSection.classList.remove('hidden');
            } else {
                spinSection.classList.add('hidden');
            }
        }

        function updateCalculations() {
            const selectedServicesContainer = document.getElementById('selected-services');
            selectedServicesContainer.innerHTML = '';
            
            // Calculate total calls and licenses
            const totalCalls = state.volume * state.spin;
            const capacity = getProviderCapacity();
            const dialRate = capacity.dialRate * capacity.capacity * state.totalHours;
            const licensesNeeded = Math.ceil(totalCalls / dialRate);
            
            // Update license display
            document.getElementById('total-calls-display').textContent = totalCalls.toLocaleString('pt-BR');
            document.getElementById('dial-rate-display').textContent = dialRate.toLocaleString('pt-BR');
            document.getElementById('licenses-display').textContent = licensesNeeded.toLocaleString('pt-BR');
            
            // Calculate phone costs
            const phoneCosts = calculatePhoneCosts(totalCalls);
            document.getElementById('ttf-cost-display').textContent = `R$ ${phoneCosts.ttfCostPerDay.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
            document.getElementById('improd-cost-display').textContent = `R$ ${phoneCosts.improdCostPerDay.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
            document.getElementById('total-phone-cost-display').textContent = `R$ ${phoneCosts.totalPhoneCost.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
            
            let licenseCostTotal = 0;
            
            Object.keys(state.selectedServices).forEach(serviceKey => {
                const basePrice = state.selectedServices[serviceKey];
                let finalPrice = basePrice;
                
                // For WIZ, use per-unit pricing
                if (state.provider === 'wiz') {
                    finalPrice = basePrice * totalCalls;
                } else {
                    // Apply licenses multiplier for other providers
                    finalPrice *= licensesNeeded;
                }
                
                licenseCostTotal += finalPrice;
                
                // Add to summary
                const serviceDiv = document.createElement('div');
                serviceDiv.className = 'flex justify-between items-center py-2 border-b border-white/20';
                serviceDiv.innerHTML = `
                    <span class="text-white/80">${serviceNames[serviceKey]}</span>
                    <span class="text-white font-semibold">R$ ${finalPrice.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</span>
                `;
                selectedServicesContainer.appendChild(serviceDiv);
            });
            
            const grandTotal = licenseCostTotal + phoneCosts.totalPhoneCost;
            
            // Update totals
            document.getElementById('license-cost-total').textContent = `R$ ${licenseCostTotal.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
            document.getElementById('phone-cost-total').textContent = `R$ ${phoneCosts.totalPhoneCost.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
            document.getElementById('grand-total').textContent = `R$ ${grandTotal.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
        }

        function calculatePhoneCosts(totalCalls) {
            const selectedServiceKeys = Object.keys(state.selectedServices);
            
            if (selectedServiceKeys.length === 0) {
                return {
                    ttfCostPerDay: 0,
                    improdCostPerDay: 0,
                    totalPhoneCost: 0
                };
            }
            
            // Get TMA for the selected services (use the first one or average if multiple)
            let avgTMA = 0;
            selectedServiceKeys.forEach(serviceKey => {
                avgTMA += serviceTMA[serviceKey] || 0;
            });
            avgTMA = avgTMA / selectedServiceKeys.length;
            
            // Convert TMA from seconds to minutes
            const tmaMinutes = avgTMA / 60;
            
            // Calculate TTF cost per day
            const ttfCostPerDay = (totalCalls * (state.hitRate / 100)) * tmaMinutes * COST_PER_MINUTE;
            
            // Calculate unproductive cost per day
            const improdCostPerDay = totalCalls * UNPRODUCTIVE_RATE * (COST_PER_MINUTE / 2);
            
            // Calculate total phone cost (for all business days)
            const totalPhoneCost = (ttfCostPerDay + improdCostPerDay) * BUSINESS_DAYS;
            
            return {
                ttfCostPerDay,
                improdCostPerDay,
                totalPhoneCost
            };
        }

        function getProviderCapacity() {
            let providerKey = state.provider;
            
            // Handle special case for Pontal SmartPlay
            if (state.provider === 'pontal' && state.selectedServices['localizador-smartplay']) {
                providerKey = 'pontal-smartplay';
            }
            
            return providerCapacity[providerKey] || { dialRate: 1, capacity: 100 };
        }

        function generateQuote() {
            const selectedServiceKeys = Object.keys(state.selectedServices);
            if (selectedServiceKeys.length === 0) {
                alert('Selecione pelo menos um servi√ßo para gerar a proposta.');
                return;
            }
            
            // Calculate totals
            const totalCalls = state.volume * state.spin;
            const capacity = getProviderCapacity();
            const dialRate = capacity.dialRate * capacity.capacity * state.totalHours;
            const licensesNeeded = Math.ceil(totalCalls / dialRate);
            const phoneCosts = calculatePhoneCosts(totalCalls);
            
            let quoteContent = `
                <strong>PROPOSTA - BELLINATI PEREZ</strong><br>
                <strong>Agentes Virtuais</strong><br>
                Data: ${new Date().toLocaleDateString('pt-BR')}<br><br>
                
                <strong>Fornecedor:</strong> ${providerNames[state.provider]}<br>
                <strong>Configura√ß√µes:</strong><br>
                ‚Ä¢ Hor√°rio: ${state.totalHours} horas<br>
                ‚Ä¢ Volume de Mailing: ${state.volume.toLocaleString('pt-BR')}<br>
            `;
            
            if (selectedServiceKeys.some(key => key === 'negociador')) {
                quoteContent += `‚Ä¢ Hit Rate: ${state.hitRate}%<br>`;
            }
            
            if (selectedServiceKeys.some(key => key === 'recado' || key === 'preventivo')) {
                quoteContent += `‚Ä¢ Spin: ${state.spin}x<br>`;
            }
            
            quoteContent += `<br><strong>Servi√ßos Contratados:</strong><br>`;
            
            let licenseCostTotal = 0;
            
            selectedServiceKeys.forEach(serviceKey => {
                const basePrice = state.selectedServices[serviceKey];
                let finalPrice = basePrice;
                
                // For WIZ, use per-unit pricing
                if (state.provider === 'wiz') {
                    finalPrice = basePrice * totalCalls;
                } else {
                    // Apply licenses multiplier for other providers
                    finalPrice *= licensesNeeded;
                }
                
                licenseCostTotal += finalPrice;
                
                quoteContent += `‚Ä¢ ${serviceNames[serviceKey]}: R$ ${finalPrice.toLocaleString('pt-BR', {minimumFractionDigits: 2})}<br>`;
            });
            
            const grandTotal = licenseCostTotal + phoneCosts.totalPhoneCost;
            
            quoteContent += `<br><strong>Custo Licen√ßas: R$ ${licenseCostTotal.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</strong><br>`;
            quoteContent += `<strong>Custo Telefonia: R$ ${phoneCosts.totalPhoneCost.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</strong><br>`;
            quoteContent += `<br><strong>VALOR TOTAL: R$ ${grandTotal.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</strong><br><br>`;
            quoteContent += `Proposta v√°lida por 7 dias.`;
            
            document.getElementById('quote-content').innerHTML = quoteContent;
            document.getElementById('quote-display').classList.remove('hidden');
            document.getElementById('quote-display').scrollIntoView({ behavior: 'smooth' });
        }

        function resetCalculator() {
            // Reset state
            state = {
                provider: 'aspect',
                selectedServices: {},
                startTime: '08:00',
                endTime: '18:00',
                totalHours: 10,
                volume: 30000,
                spin: 3,
                hitRate: 2
            };
            
            // Reset UI
            document.getElementById('provider-select').value = 'aspect';
            document.getElementById('start-time').value = '08:00';
            document.getElementById('end-time').value = '18:00';
            document.getElementById('volume-input').value = 30000;
            document.getElementById('spin-slider').value = 3;
            document.getElementById('hitrate-input').value = 2;
            
            document.getElementById('total-hours-display').textContent = '10 horas';
            document.getElementById('spin-display').textContent = '3';
            document.getElementById('selected-provider').textContent = 'Aspect';
            
            document.getElementById('quote-display').classList.add('hidden');
            
            updateAvailableServices();
            updateCalculations();
            updateVisibleSections();
        }

        // Initialize on load
        initCalculator();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'987418498258f171',t:'MTc1OTIzOTIzNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
